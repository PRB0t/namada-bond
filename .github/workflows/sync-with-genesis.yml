name: Sync with Genesis
on:
  workflow_dispatch:
  schedule:
    - cron: '0 */3 * * *' # every 3 hours
jobs:
  check-releases:
    name: Latest Genesis Data
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: sergeidyga/checkout-dirs@v1
        with:
           dirs: 'genesis transactions'
           repository: anoma/namada-mainnet-genesis

      - name: Config for push
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          
      - uses: casperdcl/push-dir@v1
        with:
          message: update static site
          branch: gh-pages
          dir: transactions
          history: false
          force: true
          name: "github-actions[bot]"
          email: "github-actions[bot]@users.noreply.github.com"
